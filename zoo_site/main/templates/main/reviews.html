{% extends 'main/index.html' %}

{% block title %}Reviews{% endblock %}

{% block content %}
    {% load static %}
    {% load filters %}

    <section>
        <h1 class="centerable">Reviews</h1>

        {% if user.is_authenticated %}
            {% if user.username|is_client %}
                <a class="centerable" href="{% url 'add_review' %}">Leave a review...</a>
            {% endif %}
        {% else %}
            <a class="centerable" href="{% url 'registration' %}">Leave a review...</a>
        {% endif %}

        {% if review_list %}
        <div class="grid-container borderable">
            {% for review in review_list %}
                <article class="grid-item" itemscope itemtype="https://schema.org/Review">
                    <h3 itemprop="reviewRating">{{ review.rating }}/10</h3>
                    <time>
                        <small itemprop="datePublished">{{ review.date }}</small>
                    </time>
                    <p itemprop="text">{{ review.content }}</p>
                    <small itemprop="author">{{ review.username }}</small>
                </article>
            {% endfor %}
        </div>
        
        {% else %}
            <p>There are no reviews.</p>
        {% endif %}
    </section>
{% endblock %}